!function(i){"use strict";i.plot.drawSeries=new function(){function n(i,n,a,e,l,t,o,s,m,r,f){var c,x,p,u,d=i+e,h=i+l,v=a,T=n,b=!1;c=x=p=!0,r?(b=x=p=!0,c=!1,T=n+e,v=n+l,(h=i)<(d=a)&&(u=h,h=d,d=u,c=!0,x=!1)):(c=x=p=!0,b=!1,d=i+e,h=i+l,(T=n)<(v=a)&&(u=T,T=v,v=u,b=!0,p=!1)),h<o.min||d>o.max||T<s.min||v>s.max||(d<o.min&&(d=o.min,c=!1),h>o.max&&(h=o.max,x=!1),v<s.min&&(v=s.min,b=!1),T>s.max&&(T=s.max,p=!1),d=o.p2c(d),v=s.p2c(v),h=o.p2c(h),T=s.p2c(T),t&&(m.fillStyle=t(v,T),m.fillRect(d,T,h-d,v-T)),f>0&&(c||x||p||b)&&(m.beginPath(),m.moveTo(d,v),c?m.lineTo(d,T):m.moveTo(d,T),p?m.lineTo(h,T):m.moveTo(h,T),x?m.lineTo(h,v):m.moveTo(h,v),b?m.lineTo(d,v):m.moveTo(d,v),m.stroke()))}function a(n,a,e,l,t){var o=n.fill;if(!o)return null;if(n.fillColor)return t(n.fillColor,e,l,a);var s=i.color.parse(a);return s.a="number"==typeof o?o:.4,s.normalize(),s.toString()}this.drawSeriesLines=function(i,n,e,l,t,o,s){n.save(),n.translate(e.left,e.top),n.lineJoin="round",i.lines.dashes&&n.setLineDash&&n.setLineDash(i.lines.dashes);var m={format:i.datapoints.format,points:i.datapoints.points,pointsize:i.datapoints.pointsize};i.decimate&&(m.points=i.decimate(i,i.xaxis.min,i.xaxis.max,l,i.yaxis.min,i.yaxis.max,t));var r=i.lines.lineWidth;n.lineWidth=r,n.strokeStyle=i.color;var f=a(i.lines,i.color,0,t,s);f&&(n.fillStyle=f,function(i,n,a,e,l,t){for(var o=i.points,s=i.pointsize,m=e>a.min?Math.min(a.max,e):a.min,r=0,f=1,c=!1,x=0,p=0,u=null,d=null;!(s>0&&r>o.length+s);){var h=o[(r+=s)-s],v=o[r-s+f],T=o[r],b=o[r+f];if(-2===s&&(v=b=m),c){if(s>0&&null!=h&&null==T){p=r,s=-s,f=2;continue}if(s<0&&r===x+s){l.fill(),c=!1,f=1,r=x=p+(s=-s);continue}}if(null!=h&&null!=T){if(t&&(null!==u&&null!==d?(T=h,b=v,h=u,v=d,u=null,d=null,r-=s):v!==b&&h!==T&&(b=v,u=T,d=v)),h<=T&&h<n.min){if(T<n.min)continue;v=(n.min-h)/(T-h)*(b-v)+v,h=n.min}else if(T<=h&&T<n.min){if(h<n.min)continue;b=(n.min-h)/(T-h)*(b-v)+v,T=n.min}if(h>=T&&h>n.max){if(T>n.max)continue;v=(n.max-h)/(T-h)*(b-v)+v,h=n.max}else if(T>=h&&T>n.max){if(h>n.max)continue;b=(n.max-h)/(T-h)*(b-v)+v,T=n.max}if(c||(l.beginPath(),l.moveTo(n.p2c(h),a.p2c(m)),c=!0),v>=a.max&&b>=a.max)l.lineTo(n.p2c(h),a.p2c(a.max)),l.lineTo(n.p2c(T),a.p2c(a.max));else if(v<=a.min&&b<=a.min)l.lineTo(n.p2c(h),a.p2c(a.min)),l.lineTo(n.p2c(T),a.p2c(a.min));else{var y=h,g=T;v<=b&&v<a.min&&b>=a.min?(h=(a.min-v)/(b-v)*(T-h)+h,v=a.min):b<=v&&b<a.min&&v>=a.min&&(T=(a.min-v)/(b-v)*(T-h)+h,b=a.min),v>=b&&v>a.max&&b<=a.max?(h=(a.max-v)/(b-v)*(T-h)+h,v=a.max):b>=v&&b>a.max&&v<=a.max&&(T=(a.max-v)/(b-v)*(T-h)+h,b=a.max),h!==y&&l.lineTo(n.p2c(y),a.p2c(v)),l.lineTo(n.p2c(h),a.p2c(v)),l.lineTo(n.p2c(T),a.p2c(b)),T!==g&&(l.lineTo(n.p2c(T),a.p2c(b)),l.lineTo(n.p2c(g),a.p2c(b)))}}else u=null,d=null}}(m,i.xaxis,i.yaxis,i.lines.fillTowards||0,n,i.lines.steps)),r>0&&function(i,n,a,e,l,t,o){var s=i.points,m=i.pointsize,r=null,f=null,c=0,x=0,p=0,u=0,d=null,h=null,v=0;for(t.beginPath(),v=m;v<s.length;v+=m)if(c=s[v-m],x=s[v-m+1],p=s[v],u=s[v+1],null!==c&&null!==p)if(isNaN(c)||isNaN(p)||isNaN(x)||isNaN(u))r=null,f=null;else{if(o&&(null!==d&&null!==h?(p=c,u=x,c=d,x=h,d=null,h=null,v-=m):x!==u&&c!==p&&(u=x,d=p,h=x)),x<=u&&x<l.min){if(u<l.min)continue;c=(l.min-x)/(u-x)*(p-c)+c,x=l.min}else if(u<=x&&u<l.min){if(x<l.min)continue;p=(l.min-x)/(u-x)*(p-c)+c,u=l.min}if(x>=u&&x>l.max){if(u>l.max)continue;c=(l.max-x)/(u-x)*(p-c)+c,x=l.max}else if(u>=x&&u>l.max){if(x>l.max)continue;p=(l.max-x)/(u-x)*(p-c)+c,u=l.max}if(c<=p&&c<e.min){if(p<e.min)continue;x=(e.min-c)/(p-c)*(u-x)+x,c=e.min}else if(p<=c&&p<e.min){if(c<e.min)continue;u=(e.min-c)/(p-c)*(u-x)+x,p=e.min}if(c>=p&&c>e.max){if(p>e.max)continue;x=(e.max-c)/(p-c)*(u-x)+x,c=e.max}else if(p>=c&&p>e.max){if(c>e.max)continue;u=(e.max-c)/(p-c)*(u-x)+x,p=e.max}c===r&&x===f||t.moveTo(e.p2c(c)+n,l.p2c(x)+a),r=p,f=u,t.lineTo(e.p2c(p)+n,l.p2c(u)+a)}else d=null,h=null;t.stroke()}(m,0,0,i.xaxis,i.yaxis,n,i.lines.steps),n.restore()},this.drawSeriesPoints=function(i,n,e,l,t,o,s){function m(i,n,a,e,l,t){i.moveTo(n+e,a),i.arc(n,a,e,0,l?Math.PI:2*Math.PI,!1)}m.fill=!0,n.save(),n.translate(e.left,e.top);var r={format:i.datapoints.format,points:i.datapoints.points,pointsize:i.datapoints.pointsize};i.decimatePoints&&(r.points=i.decimatePoints(i,i.xaxis.min,i.xaxis.max,l,i.yaxis.min,i.yaxis.max,t));var f,c=i.points.lineWidth,x=i.points.radius,p=i.points.symbol;"circle"===p?f=m:"string"==typeof p&&o&&o[p]?f=o[p]:"function"==typeof o&&(f=o),0===c&&(c=1e-4),n.lineWidth=c,n.fillStyle=a(i.points,i.color,null,null,s),n.strokeStyle=i.color,function(i,a,e,l,t,o,s,m){var r=i.points,f=i.pointsize;n.beginPath();for(var c=0;c<r.length;c+=f){var x=r[c],p=r[c+1];null==x||x<o.min||x>o.max||p<s.min||p>s.max||(x=o.p2c(x),p=s.p2c(p)+l,m(n,x,p,a,t,e))}m.fill&&!t&&n.fill(),n.stroke()}(r,x,!0,0,!1,i.xaxis,i.yaxis,f),n.restore()},this.drawSeriesBars=function(i,e,l,t,o,s,m){e.save(),e.translate(l.left,l.top);var r,f={format:i.datapoints.format,points:i.datapoints.points,pointsize:i.datapoints.pointsize};i.decimate&&(f.points=i.decimate(i,i.xaxis.min,i.xaxis.max,t)),e.lineWidth=i.bars.lineWidth,e.strokeStyle=i.color;var c=i.bars.barWidth[0]||i.bars.barWidth;switch(i.bars.align){case"left":r=0;break;case"right":r=-c;break;default:r=-c/2}!function(a,l,t,o,s,m){for(var r=a.points,f=a.pointsize,c=i.bars.fillTowards||0,x=c>m.min?Math.min(m.max,c):m.min,p=0;p<r.length;p+=f)if(null!=r[p]){var u=3===f?r[p+2]:x;n(r[p],r[p+1],u,l,t,o,s,m,e,i.bars.horizontal,i.bars.lineWidth)}}(f,r,r+c,i.bars.fill?function(n,e){return a(i.bars,i.color,n,e,m)}:null,i.xaxis,i.yaxis),e.restore()},this.drawBar=n}}(jQuery);